<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <meta http-equiv='X-UA-Compatible' content='ie=edge'>
  <title>和可被 K 整除的子数组</title>
<link rel='stylesheet' href='../../util/css/index.css'>
<script src='../../util/js/highlight/index.js'></script>
</head>
<body>
  <a href='https://leetcode-cn.com/problems/subarray-sums-divisible-by-k/'>和可被 K 整除的子数组</a>
  <pre class='hljs'>
    给定一个整数数组 A，返回其中元素之和可被 K 整除的（连续、非空）子数组的数目。
    <code class='javascript'>
      示例：
      
      输入：A = [4,5,0,-2,-3,1], K = 5
      输出：7
      解释：
      有 7 个子数组满足其元素之和可被 K = 5 整除：
      [4, 5, 0, -2, -3, 1], [5], [5, 0], [5, 0, -2, -3], [0], [0, -2, -3], [-2, -3]
       
      提示：
      
      1 <= A.length <= 30000
      -10000 <= A[i] <= 10000
      2 <= K <= 10000
     </code>
  </pre>
</body>
</html>
<script>
/**
 * @param {number[]} A
 * @param {number} K
 * @return {number}
 */
 var subarraysDivByK = function(A, K) {
  let total = 0
  let sum = 0
  let obj = {0: 1}
  for(let item of A){
    sum = (sum + item) % K
    if(sum < 0) sum += K
    total += obj[sum] || 0
    obj[sum] = (obj[sum] || 0) + 1
  }
  console.log(obj)
  return total
};
let A = [4,5,0,-2,-3,1], K = 5
console.log(subarraysDivByK(A, K))



/* 
let A = [4,5,0,-2,-3,1], K = 5
let map = {0: 1}
let preSum = 0, count = 0

循环A
  i     preSum = (preSum + A[i]) % K, preSum < 0 => preSum +=K, map[preSum] ? count += map[preSum], map[preSum]++ : map[preSum] = 1

i = 0,  preSum = (0 + 4) % 5 = 4, map中不存在4 => map[4] = 1
i = 1,  preSum = (4 + 5) % 5 = 4, map中存在4 => count += map[4] => count = 1,  map[4] = map[4] + 1 = 2
i = 2,  preSum = (4 + 0) % 5 = 4, map中存在4 => count += map[4] => count = 3,  map[4] = 3
i = 3,  preSum = (4 - 2) % 5 = 2, map中不存在2 => map[2] = 1
i = 4,  preSum = (2 - 3) % 5 = -1 小于0 => preSum = -1 + 5 = 4, map中存在4 => count += map[4] => count = 6,  map[4] = 4
i = 5,  preSum = (4 + 1) % 5 = 0, map中存在0 => count += map[0] => count = 7, map[0] = 2
*/
</script>